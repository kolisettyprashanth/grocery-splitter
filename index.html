<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Grocery Splitter (Unlimited People)</title>
    <style>
        body { 
            font-family: Arial; 
            margin: 20px; 
            background:#f6f6f6;
        }
        h2 { margin-bottom: 5px; }
        button { padding: 8px 15px; margin: 10px 5px; }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin-top: 20px; 
            background:white; 
        }
        th, td { 
            border: 1px solid #ccc; 
            padding: 10px; 
            text-align: center; 
        }
        th { background: #eaeaea; }
        .total-box { 
            margin-top: 20px; 
            padding: 10px; 
            background: white; 
            border:1px solid #ccc; 
        }
        input[type="text"], input[type="number"] {
            width: 95%;
            padding: 6px;
        }
        .name-row {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>

<h2>Grocery Splitter (Unlimited People, INR ₹)</h2>

<h3>Enter People:</h3>
<div id="namesArea">
    <div class="name-row"><input type="text" class="nameInput" placeholder="Person Name"></div>
</div>

<button onclick="addPerson()">Add Person</button>
<button onclick="createTable()">Create Table</button>

<div id="tableContainer"></div>

<script>
let personNames = [];

function addPerson() {
    const area = document.getElementById("namesArea");
    const div = document.createElement("div");
    div.className = "name-row";
    div.innerHTML = `<input type="text" class="nameInput" placeholder="Person Name">`;
    area.appendChild(div);
}

function createTable() {
    const inputs = document.getElementsByClassName("nameInput");
    personNames = [];

    for (let i = 0; i < inputs.length; i++) {
        let name = inputs[i].value.trim();
        if (name !== "") personNames.push(name);
    }

    if (personNames.length === 0) {
        alert("Please enter at least one name!");
        return;
    }

    let html = `
        <table id="itemsTable">
            <tr>
                <th>Item</th>
                <th>Price (₹)</th>
                ${personNames.map(n => `<th>${n}</th>`).join("")}
            </tr>
        </table>
        <button onclick="addRow()">Add Item</button>
        <button onclick="calculate()">Calculate Totals</button>
        <div class="total-box" id="results"></div>
    `;

    document.getElementById("tableContainer").innerHTML = html;
}

function addRow() {
    const table = document.getElementById("itemsTable");
    const row = table.insertRow(-1);

    row.insertCell(0).innerHTML = `<input type='text' placeholder='Item'>`;
    row.insertCell(1).innerHTML = `<input type='number' placeholder='0' step='0.01'>`;

    for (let i = 0; i < personNames.length; i++) {
        row.insertCell(2 + i).innerHTML = `<input type='checkbox'>`;
    }
}

function calculate() {
    let totals = Array(personNames.length).fill(0);
    const table = document.getElementById("itemsTable");

    for (let i = 1; i < table.rows.length; i++) {
        let price = parseFloat(table.rows[i].cells[1].children[0].value) || 0;

        let persons = [];
        for (let p = 0; p < personNames.length; p++) {
            if (table.rows[i].cells[2 + p].children[0].checked) {
                persons.push(p);
            }
        }

        if (persons.length > 0) {
            let share = price / persons.length;
            persons.forEach(p => totals[p] += share);
        }
    }

    let resultHTML = "<h3>Total per Person (₹):</h3>";
    for (let i = 0; i < personNames.length; i++) {
        resultHTML += `${personNames[i]}: ₹${totals[i].toFixed(2)}<br>`;
    }

    document.getElementById("results").innerHTML = resultHTML;
}
</script>

</body>
</html>
